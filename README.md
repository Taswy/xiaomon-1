# xiaomon
小mon微信公共平台的开发
###1.架构：数据层为hibernate框架，后台为servlet接收
###2.功能开发
####2.1发红包系统
* 功能描述：
在预设时间用户微信回复红包，会返回一个红包口令
如果没有到达预设时间，提醒时间还没到达
如果用户领过红包，再回复红包，提醒红包已经领过了
如果红包被领完，回复红包，提醒红包已经领完了
* 代码实现：
通过用户的openid来唯一标识微信用户
每次用户回复红包，在数据库中检索改用户，若不存在添加用户，并从数据库中随机返回一个红包码，并在数据库中删除这个红包码
若存在，说明已经领过红包了

####2.2图灵机器人接入
* 功能描述：
如果用户回复的不是“红包”，可以将回复的内容送入图灵机器人接口。可以查天气，做数学题等等
* 代码实现：
根据图灵机器人API文档实现，主要就是http请求和json数据的解析。
图灵会对每个用户标记，来获取该用户的上下文，这个用户表示可以用openid来实现

